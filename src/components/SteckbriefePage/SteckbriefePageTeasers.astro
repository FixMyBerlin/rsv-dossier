---
import TeaserCard from '@components/Teaser/TeaserCard.astro'
import TeasersContainer from '@components/Teaser/TeasersContainer.astro'
import type { MetaSchema } from 'data/zod/metaSchema'

export type RsvTeaser = {
  jsonId: MetaSchema['id']
  general: {
    ref: MetaSchema['general']['ref']
    name: MetaSchema['general']['name']
    description: MetaSchema['general']['description']
  }
  state: MetaSchema['state']
  staticMap: string
}

type Props = {
  rsvTeasers: RsvTeaser[]
}
const { rsvTeasers } = Astro.props

const steckbriefePath = (id: string) => `/steckbriefe/${id}`
---

<TeasersContainer>
  {
    rsvTeasers.map((rsvTeaser) => (
      <TeaserCard
        title={
          // @ts-expect-error
          (Number.isNaN(parseFloat(rsvTeaser.general.ref)) ? `${rsvTeaser.general.ref}: ` : '') +
          (rsvTeaser.general.name || rsvTeaser.jsonId)
        }
        description={rsvTeaser.general.description || undefined}
        tag={rsvTeaser.state}
        href={steckbriefePath(rsvTeaser.jsonId)}
        image={rsvTeaser.staticMap}
      />
    ))
  }
</TeasersContainer>
